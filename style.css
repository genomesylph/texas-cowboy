/* =========================================================
   Texas Cowboy – Optimized style.css (full)
   - Keep same visuals/behavior; dedup + responsive polish
   ========================================================= */

/* ----------------------
   Root variables (desktop)
   ---------------------- */
:root{
  /* Theme */
  --leather:#3a2516; --leather-d:#2a1a10;
  --parch:#f0e0c8; --gold:#e2b34b;
  --green:#58b368; --red:#d9534f; --blue:#4fa3ff;
  --text:#f7eddc;

  /* Side figures */
  --side-fig-w: 140px;

  /* Card sizes */
  --card-w: 80px;      /* width */
  --card-h: 114px;     /* height */
  --rank-size: 32px;   /* A/K/Q/J/number */
  --suit-size: 30px;   /* ♠ ♥ ♦ ♣ */

  /* Tiles (bottom zones) */
  --tile-gap: 10px;
  --tile-pad: 12px;
  --tile-min-h: 60px;
  --tile-font: 18px;
  --tile-title: 16px;
  --tile-odd: 16px;

  /* Uniform tile height */
  --tile-uniform: 70px;

  /* History dots (top badges) */
  --hist-dot: 14px;        /* dot size */
  --hist-gap: 6px;         /* spacing between dots */
  --hist-pad-y: 6px;       /* vertical padding */
  --hist-pad-x: 10px;      /* horizontal padding */
  --hist-bracket: 14px;    /* [ ] size for latest */
  --hist-bracket-off: 8px; /* [ ] offset from dot */

  /* Top 3 zone headers (Cowboy / Tie / Bull) */
  --zone-head-size: 20px;  /* ปรับที่นี่ให้ใหญ่/เล็กได้ง่าย */
}

/* ----------------------
   Base & layout
   ---------------------- */
*{box-sizing:border-box}
body{
  margin:0;font-family:system-ui,Segoe UI,Roboto,Inter,sans-serif;color:var(--text);
  background:url("background.png") center/cover fixed no-repeat;
}

/* ---------- TOP BAR ---------- */
.topbar{display:flex;justify-content:space-between;align-items:center;padding:10px 14px;background:linear-gradient(#3f2a1a,#2a1a10);border-bottom:2px solid #0006}
.topbar h1{font-size:18px;margin:0;color:var(--parch)}
.wallet{display:flex;gap:8px;align-items:center}
.btn{border:1px solid #5a3a25;background:#513520;color:#ffe9b8;border-radius:10px;padding:10px 14px;cursor:pointer}
.btn.sm{padding:6px 10px}
.btn.primary{background:linear-gradient(#805333,#6b452a)}
.btn.lg{font-size:18px;padding:12px 18px;border-radius:12px}

/* ---------- LAYOUT ---------- */
.wrap{max-width:1100px;margin:16px auto;padding:12px}
.arena{display:grid;grid-template-columns:1fr auto 1fr;gap:12px;align-items:start}

/* player sides */
.side{position:relative;background:#0f191a;border:1px solid #0008;border-radius:16px;padding:12px;min-height:160px;overflow:visible}
.side-head{display:flex;justify-content:space-between;align-items:center;gap:8px;font-weight:800;color:var(--parch)}
.dot{width:10px;height:10px;border-radius:50%;display:inline-block}
.dot.red{background:var(--red)} .dot.blue{background:var(--blue)} .dot.green{background:var(--green)}
.tag{padding:2px 8px;border-radius:999px;border:1px solid #0008;color:#ddd;background:#2a1c16}
.hand{display:flex;gap:8px;margin-top:8px}

/* Side figures (cowboy/bull) hugging the edges */
.side.cowboy::before,
.side.bull::before{
  content:""; position:absolute; top:0; bottom:0; width:var(--side-fig-w);
  background-repeat:no-repeat; background-position:center; background-size:contain;
  filter: drop-shadow(0 2px 8px rgba(0,0,0,.4));
  pointer-events:none;
}
.side.cowboy::before{ left:calc(-1 * var(--side-fig-w)); background-image:url("cowboy.png"); }
.side.bull::before{ right:calc(-1 * var(--side-fig-w)); background-image:url("bull.png"); }

/* board */
.center{ position: relative; }
.center .community{
  display:flex;gap:8px;background:linear-gradient(#0f2c2e,#0b2426);
  border:1px solid #0008;border-radius:12px;padding:8px;min-height:106px;
  position:relative;padding-bottom:40px; /* เผื่อพื้นที่ให้แถบผลด้านล่าง */
}

/* วางแถบผลภายในกล่องกองกลางด้านล่าง */
.center .result{
  position:absolute; left:10px; right:10px; bottom:8px;
  margin:0 !important; width:auto !important; text-align:center;
  white-space:nowrap; z-index:5;
}

/* cards */
.hand .card, .community .card{
  width: var(--card-w) !important;
  height: var(--card-h) !important;
  font-size: var(--rank-size) !important;
  display: grid; place-items: center;
}
.hand .card small, .community .card small{
  font-size: var(--suit-size) !important;
  line-height: 1 !important;
}
.card{border-radius:10px;background:#fff;color:#111;font-weight:800;border:2px solid #0002;box-shadow:0 2px 8px #0005}
.card.red{color:#c62839}

/* chips row */
.chips{display:flex;align-items:center;gap:8px;margin-top:12px}
.chip-title{opacity:.9;margin-right:6px}
.chip{border:2px solid #3a2a18;background:#2b201b;color:#ffe4a6;border-radius:999px;padding:8px 14px;font-weight:800;cursor:pointer}
.chip.active{outline:3px solid var(--gold)}

/* bet zones */
.zone{margin-top:14px}
.zone-grid-top{display:grid;grid-template-columns:repeat(3,1fr);gap:10px}
.zone-bottom{display:grid;grid-template-columns:1fr 1fr;gap:16px}
.zone-head{
  background:#4a2f1c;border:2px solid #6a4027;color:#f7dca5;
  border-radius:10px;padding:6px 10px;margin-bottom:8px;
  text-align:center;font-weight:800;letter-spacing:.5px;
  font-size: var(--zone-head-size) !important; /* <<< ปรับผ่านตัวแปร */
}

/* subgrid (5 rows) */
.zone-grid-sub{display:grid;grid-template-columns:1fr;gap:var(--tile-gap);grid-auto-rows:auto}
.left-five,.right-five{grid-template-columns:1fr !important}

/* tiles */
.tile{
  background:linear-gradient(#163d40,#0f2c2e);
  border:2px solid #30241b;border-radius:12px;
  padding:var(--tile-pad) !important;
  cursor:pointer;position:relative;
  min-height:var(--tile-min-h) !important;
  box-shadow:0 2px 0 #0006 inset;
  /* Uniform height across all tiles */
  height: var(--tile-uniform) !important;
  overflow: hidden;                    /* prevent text from pushing height */
  display: grid; grid-template-rows: auto 1fr auto;   /* header / content / footer */
}
.tile:hover{outline:2px solid #3ec6c7}
.t-head,.t-center{display:flex;justify-content:space-between;align-items:center}
.t-center{justify-content:center;gap:10px}
.t-center .title{font-size:18px;font-weight:900;text-transform:uppercase}
.odd{color:var(--gold);font-weight:900;font-size:var(--tile-odd) !important}
.foot{display:flex;justify-content:space-between;align-items:center;margin-top:8px;gap:8px;font-size:var(--tile-font) !important}
.placed{font-weight:800}
.since{color:#bfbfbf;font-size:12px}
.flag{width:12px;height:12px;border-radius:50%;border:2px solid #0003;display:inline-block}
.flag.win{background:var(--green)} .flag.lose{background:#b44}

/* log tile */
#log-tile .t-head{display:none}
#log-tile{padding:8px;min-height:calc(var(--tile-uniform)) !important;height:var(--tile-uniform) !important}
#log{
  /* Hide scroll and cap height to uniform tile */
  max-height: calc(var(--tile-uniform) - 16px) !important;
  overflow: hidden !important;
  line-height:1.25;
  background:#27190f;border:1px solid #5a3a25;border-radius:8px;
  padding:8px;color:#ffe7c7;font-size:13px
}

/* controls tile (do not force-uniform to allow big button if needed) */
#controls-tile{cursor:default;height:auto !important;min-height:0 !important}

/* history badges */
.history{display:flex;gap:var(--hist-gap);flex-wrap:wrap;justify-content:center;margin-bottom:8px;
  /* dark glass container */
  background: rgba(0,0,0,0.45); border: 1px solid rgba(255,255,255,0.08);
  border-radius: 10px; padding: var(--hist-pad-y) var(--hist-pad-x);
  width: fit-content; margin-left:auto; margin-right:auto;
  backdrop-filter: blur(2px);
}
.badge{width:var(--hist-dot);height:var(--hist-dot);border-radius:50%}
.badge.l{background:var(--red)} .badge.r{background:var(--blue)} .badge.t{background:var(--green)}
.badge.latest{position:relative}
.badge.latest::before,
.badge.latest::after{
  position:absolute; top:50%; transform:translateY(-50%);
  font-weight:900; font-size:var(--hist-bracket); color:#c0af1a; line-height:1;
}
.badge.latest::before{content:'['; left:calc(-1 * var(--hist-bracket-off))}
.badge.latest::after{content:']'; right:calc(-1 * var(--hist-bracket-off))}

/* Inline result pill (generic) */
.result{
  display:inline-block; background:rgba(0,0,0,0.45);
  border:1px solid rgba(255,255,255,0.08); border-radius:10px;
  padding:6px 10px; color:#fff; backdrop-filter:blur(2px);
  white-space: nowrap;
}

/* Rank labels pinned to bottom of side panels */
#leftRank,#rightRank{
  position:absolute; left:50%; bottom:6px; transform:translateX(-50%); z-index:2;
  background:rgba(0,0,0,.55); color:#fff; border:1px solid rgba(255,255,255,.12);
  border-radius:10px; padding:3px 8px;
}
.side{ padding-bottom:38px; }

/* ====== Patch: widen result pill under side panels & avoid wrapping ====== */
.side .result{ display:block; width:calc(100% - 16px); margin:6px auto 0; text-align:center; }

/* --- Stretch rank pill & keep one line --- */
#leftRank, #rightRank{
  position:absolute;
  left:8px; right:8px; bottom:6px;
  transform:none; text-align:center; white-space:nowrap;
  padding:6px 10px; line-height:1.1; border-radius:12px; z-index:2; width:auto;
}
/* เผื่อพื้นที่ด้านล่างไม่ให้ชน */
.side{ padding-bottom:48px; }

/* ----------------------
   Responsive
   ---------------------- */

/* Tablet and below */
@media (max-width:900px){
  .wrap{max-width:100%; padding:10px}
  :root{
    --side-fig-w: 96px;
    --card-w: 66px; --card-h: 92px; --rank-size: 26px; --suit-size: 18px;
    --tile-gap: 8px; --tile-pad: 10px; --tile-min-h: 56px;
    --tile-font: 16px; --tile-title: 15px; --tile-odd: 15px;
    --zone-head-size: 18px; /* tablet ย่อเล็กน้อย */
  }
  .arena{grid-template-columns:1fr}
  .zone-grid-top{grid-template-columns:repeat(3,1fr)}
}

/* Mobile portrait */
@media (max-width:600px){
  /* Hide side figures entirely */
  .side.cowboy::before,.side.bull::before{display:none !important;width:0 !important}
  :root{
    --side-fig-w: 0px;

    /* ย่อหัวข้อสามช่องบนลง 70% ของ desktop (20px → 14px) */
    --zone-head-size: 14px;
  }

  /* Keep three columns on the top row but allow shrinking */
  .arena> .side, .arena> .center{min-width:0 !important}
  .arena{ grid-template-columns: minmax(0,.9fr) minmax(0,1.2fr) minmax(0,.9fr); gap:8px; }

  /* Cards & tiles scale down */
  :root{
    --card-w: 46px; --card-h: 66px; --rank-size: 20px; --suit-size: 13px;
    --tile-gap: 8px; --tile-pad: 8px; --tile-min-h: 50px;
    --tile-font: 10px; --tile-title: 10px; --tile-odd: 10px;
  }

  .hand{gap:6px}
  .center .community{gap:6px;padding:4px;padding-bottom:40px}
  .side{padding:8px}
  .side .side-head .tag{transform:scale(.95)}
  .zone-grid-top{grid-template-columns:repeat(3,1fr);gap:8px}
  .zone-grid-top .tile{min-height:54px !important}
  .t-center .title{font-size:14px}
  .zone-bottom{grid-template-columns:1fr 1fr;gap:10px}
  .zone-head{padding:5px 8px}
  .tile{padding:var(--tile-pad) !important;min-height:var(--tile-min-h) !important}
  .foot{margin-top:6px}
  #log{font-size:12px}
  .result{padding:4px 8px;margin:6px auto 0;font-size:14px}

  /* ลดตัวอักษรในกล่องเดิมพันลง ~70% (ยกเว้น .since) */
  .tile,
  .tile .t-center .title,
  .tile .foot,
  .tile .odd,
  .tile .placed{
    font-size:70% !important;
  }
  /* คงขนาดตัว "ไม่ออกมากี่ตา" */
  .tile .since{
    font-size:12px !important;
    line-height:1.2 !important;
  }

  /* Stick chips and main action button at the bottom */
  body{padding-bottom:130px}
  .chips{
    position:fixed; left:6px; right:6px; bottom:6px; z-index:60;
    background:linear-gradient(#2b201b,#1f1712);
    border:1px solid #0008; border-radius:12px; padding:6px 8px; gap:6px;
    overflow-x:auto; white-space:nowrap;
  }
  #controls-tile{display:block !important}
  #deal{
    position:fixed; left:10px; right:10px; bottom:74px; z-index:70;
    border-radius:12px; padding:12px 16px; font-size:16px;
  }

  /* Rank labels compact */
  #leftRank,#rightRank{bottom:4px;padding:2px 7px;font-size:13px}
  .side{padding-bottom:34px}

  /* History cluster compact */
  :root{
    --hist-dot: 11px; --hist-gap: 4px; --hist-pad-y: 4px; --hist-pad-x: 6px;
    --hist-bracket: 12px; --hist-bracket-off: 6px;
  }
}

/* Very small screens */
@media (max-width:420px){
  :root{ --card-w: 42px; --card-h: 60px; --rank-size: 18px; --suit-size: 12px; }
  .arena{ grid-template-columns: minmax(0,.95fr) minmax(0,1.1fr) minmax(0,.95fr); }
}
@media (max-width:600px){
  /* ปรับระยะห่างปุ่มด้านบนให้ชิด */
  .chips {
    gap: 0 !important;          /* เอาช่องว่างระหว่างปุ่มออก */
    justify-content: space-between; /* ให้ปุ่มขยายเต็มแนว */
    padding: 4px !important;    /* ลด padding รอบนอก */
    margin-top: 0 !important;   /* เอาระยะบนออก */
  }

  /* ถ้าตัวปุ่มเองมี margin ให้รีเซ็ต */
  .chip {
    margin: 0 !important;
  }
}


/* === 10-dot history bar === */
.history-dots{
  display:flex; gap:6px; justify-content:center; align-items:center;
  padding:10px 0; flex-wrap:wrap;
}
.history-dots .dot{
  width:12px; height:12px; border-radius:50%;
  background:#d1d5db; /* neutral */
  box-shadow:0 0 0 1px rgba(0,0,0,.1) inset;
}
.history-dots .dot.l{ background:#ef4444; }  /* Left win */
.history-dots .dot.r{ background:#4fa3ff; }  /* Right win */
.history-dots .dot.s{ background:#22c55e; }  /* Split */
/* === Fancy 3D Flip Cards === */
:root{
  --flip-duration: 4s; /* ให้ตรงกับเวลาที่ FLIP phase */
}
.hand, .community{ perspective: 900px; }

.card3d{ width: var(--card-w); height: var(--card-h); position: relative; transform-style: preserve-3d; }
.card3d .inner{
  position: absolute; inset:0; transform-style: preserve-3d; will-change: transform;
  animation: cardFlip var(--flip-duration) cubic-bezier(.22,.61,.36,1) forwards;
  animation-delay: var(--flip-delay, 0ms);
}
.card3d .face{ position:absolute; inset:0; backface-visibility: hidden; border-radius:10px; box-shadow:0 6px 14px rgba(0,0,0,.18); }
.card3d .back{ background: linear-gradient(135deg,#1f2937,#0f172a); border:1px solid rgba(255,255,255,.08); }
.card3d .front{ transform: rotateY(180deg); background:#fff; border:1px solid #ddd; }

@keyframes cardFlip{
  0% { transform: rotateY(0deg); }
  50%{ transform: rotateY(90deg); }
  100%{ transform: rotateY(180deg); }
}
#deal { display: none !important; }
.card .card-back {
  transform: rotateY(180deg);
}
.card.flipped .card-inner {
  transform: rotateY(180deg);
}
/* ===== Mini 6-dot streak (per tile) ===== */
.mini-dots-wrap{ display:flex; justify-content:center; align-items:center; }
.mini-dots{
  display:flex; gap:6px; align-items:center; justify-content:center;
}
.mini-dots .mdot{
  width:10px; height:10px; border-radius:50%;
  box-shadow:0 0 0 1px rgba(0,0,0,.2) inset;
}
.mini-dots .mdot.r{ background:#ef4444; } /* ไม่ออก = สีแดง */
.mini-dots .mdot.g{ background:#22c55e; } /* ออก    = สีเขียว */

/* ใส่วงเล็บครอบเฉพาะ "จุดล่าสุด" (ขวาสุด) */
.mini-dots .mdot.latest{ position: relative; }
.mini-dots .mdot.latest::before,
.mini-dots .mdot.latest::after{
  position:absolute; top:50%; transform:translateY(-50%);
  font-weight:900; font-size:12px; color:#c0af1a; line-height:1;
}
.mini-dots .mdot.latest::before{ content:'['; left:-8px; }
.mini-dots .mdot.latest::after{ content:']'; right:-8px; }
/* ========== ปรับ [] ให้ชิด/ตรง และจัดกึ่งกลางจุด ========== */

/* 1) มินิดอท 6 จุด: ขยับวงเล็บให้ชิดขึ้น ไม่เบียดจุดข้างๆ และตั้งตรง */
.mini-dots       { gap: 8px; }                   /* ระยะห่างระหว่างจุด */
.mini-dots .mdot.latest::before,
.mini-dots .mdot.latest::after{
  position:absolute; top:50%; transform:translateY(-50%); /* จัดกึ่งกลางแนวตั้ง */
  font-weight:900; font-style:normal; line-height:1; 
  font-family: ui-monospace, SFMono-Regular, Menlo, monospace;  /* ไม่เอียง */
  font-size: 11px; color:#c0af1a; letter-spacing:0;
  pointer-events:none;
}
.mini-dots .mdot.latest::before{ content:'['; left:-5px; }  /* เดิม -8px → -5px ให้ชิดขึ้น */
.mini-dots .mdot.latest::after { content:']'; right:-5px; }

/* 2) 10 จุดบน (คาวบอย/เสมอ/กระทิง): จัดให้อยู่กึ่งกลางเสมอ */
.history-dots{
  display:flex; gap:10px; align-items:center; justify-content:center;
  margin: 0 auto; width: fit-content;          /* บังคับให้อยู่กลาง */
}
.history-dots .dot{ width:12px; height:12px; border-radius:50%; }

/* วงเล็บของจุดล่าสุดบนแถบ 10 จุด (เราใส่มาเป็น <span> จาก JS) → ให้ชิด/ตรง */
.history-dots > span{
  display:inline-block; margin:0 3px; line-height:1; 
  font-weight:900; font-style:normal; transform:none;
  font-family: ui-monospace, SFMono-Regular, Menlo, monospace;  /* ไม่เอียง */
}
/* ----- Force center the 10-dot bar (Cowboy / Tie / Bull) ----- */
/* ทำให้ #history เป็นกล่องกว้างเท่าที่จำเป็น แล้วบังคับให้ไปอยู่กลาง
   แม้ parent จะเป็น flex และใช้ space-between ก็ตาม */
#history,
.history-dots {
  display: flex;
  gap: 10px;
  align-items: center;
  justify-content: center;

  width: max-content;       /* กว้างเท่าที่จุดต้องใช้ */
  margin-left: auto;        /* center ใน flex parent */
  margin-right: auto;       /* center ใน flex parent */
  flex: 0 0 auto;           /* ห้ามถูกยืดความกว้าง */
  align-self: center;       /* ถ้า parent จัด cross-axis */
}

/* วงเล็บของจุดล่าสุด: ใช้ฟอนต์โมโน/ตั้งตรง และชิดกว่านี้ไม่ให้ไปชนจุดข้าง ๆ */
.history-dots > span{
  display:inline-block;
  margin: 0 2px;            /* เดิม 3–5px → ให้ชิดขึ้น */
  line-height: 1;
  font-weight: 900;
  font-style: normal;
  transform: none;
  font-family: ui-monospace, SFMono-Regular, Menlo, monospace;
}

/* mini 6-dot: ขยับวงเล็บให้ชิดและ "ตั้งตรง" เช่นกัน */
.mini-dots .mdot.latest::before,
.mini-dots .mdot.latest::after{
  position:absolute; top:50%; transform:translateY(-50%);
  font-weight:900; font-style:normal; line-height:1;
  font-family: ui-monospace, SFMono-Regular, Menlo, monospace;
  font-size:11px; color:#c0af1a; pointer-events:none;
}
.mini-dots .mdot.latest::before { content:'['; left:-4px; }  /* ชิดขึ้น */
.mini-dots .mdot.latest::after  { content:']'; right:-4px; } /* ชิดขึ้น */
/* ----- FIX: Mini 6-dot row must be perfectly level and centered ----- */

/* คอนเทนเนอร์ที่เราใส่ลงใน [data-since] ให้จัดกลางแนวตั้ง-แนวนอน และตัด baseline ออก */
[data-since]{
  display:flex;
  align-items:center;
  justify-content:center;
  line-height:0;            /* กัน baseline ทำให้ดันขึ้น/ลง */
}

/* กล่อง 6 จุดให้เป็น inline-flex เพื่อไม่โดน baseline เล่นงาน และกำหนดความสูงคงที่ */
.mini-dots-wrap{ display:flex; align-items:center; justify-content:center; }
.mini-dots{
  display:inline-flex;      /* <— สำคัญ: ไม่ใช้ inline ธรรมดา */
  align-items:center;
  gap:8px;
  line-height:0;            /* ตัดผลของฟอนต์ */
  vertical-align:middle;
}

/* จุดให้เป็น block + relative เพื่อให้ pseudo-element ยึดจากจุดได้เป๊ะ */
.mini-dots .mdot{
  display:block;            /* <— ไม่ใช้อินไลน์ */
  width:10px; height:10px;
  border-radius:50%;
  position:relative;        /* ให้ [ ] จับตำแหน่งจากจุด */
}

/* สีเขียว/แดงตามเดิม */
.mini-dots .mdot.g{ background:#22c55e; }
.mini-dots .mdot.r{ background:#ef4444; }

/* วงเล็บของ “จุดล่าสุด” — จัดศูนย์กลางแนวตั้งจริง ๆ และชิดพอดี */
.mini-dots .mdot.latest::before,
.mini-dots .mdot.latest::after{
  content:'';
  position:absolute;
  top:50%; transform:translateY(-50%);  /* กึ่งกลางจริง */
  font: 900 11px ui-monospace, SFMono-Regular, Menlo, monospace;
  line-height:1; letter-spacing:0; font-style:normal;
  color:#c0af1a;
  pointer-events:none;
}
.mini-dots .mdot.latest::before{ content:'['; left:-6px; }
.mini-dots .mdot.latest::after { content:']'; right:-6px; }
/* ---- Force center mini 6-dots for top three tiles (Cowboy / Tie / Bull) ---- */
.tile[data-bet="LEFT_WIN"] [data-since],
.tile[data-bet="TIE"]       [data-since],
.tile[data-bet="RIGHT_WIN"] [data-since]{
  display: flex !important;
  justify-content: center !important;
  align-items: center !important;
  width: 100% !important;
  text-align: center !important;
  line-height: 0;           /* ตัด baseline ที่ทำให้ดูเอียง */
}

/* ให้แถบจุดจริง ๆ จัดกลางในคอนเทนเนอร์ */
.tile[data-bet="LEFT_WIN"] .mini-dots,
.tile[data-bet="TIE"]       .mini-dots,
.tile[data-bet="RIGHT_WIN"] .mini-dots{
  margin-left: auto !important;
  margin-right: auto !important;
}

/* เผื่อ parent ของ [data-since] ใช้ flex ที่ดันไปขวา — รีเซ็ตทับเฉพาะ 3 ช่องบน */
.tile[data-bet="LEFT_WIN"]  .mini-dots-wrap,
.tile[data-bet="TIE"]       .mini-dots-wrap,
.tile[data-bet="RIGHT_WIN"] .mini-dots-wrap{
  display: flex;
  justify-content: center !important;
  align-items: center;
  width: 100%;
}
/* ---------- FIX: 10-dot history overflow on mobile ---------- */
@media (max-width: 600px){
  /* ให้คอนเทนเนอร์ 10 จุดถูกจำกัดความกว้างคอลัมน์กลาง + เลื่อนได้ในแนวนอน */
  .history{
    max-width: 100% !important;
    flex-wrap: nowrap !important;
    overflow-x: auto !important;
    overflow-y: hidden !important;
    -webkit-overflow-scrolling: touch;
    z-index: 5;                              /* ให้อยู่เหนือการ์ด/กล่องข้าง ๆ */
    padding-left:  calc(var(--hist-pad-x) + var(--hist-bracket-off));
    padding-right: calc(var(--hist-pad-x) + var(--hist-bracket-off));
    gap: var(--hist-gap);                    /* ใช้ค่าจากตัวแปร mobile ที่ตั้งไว้แล้ว */
  }
  /* ซ่อนสกอร์ลบาร์บน iOS/Chrome ให้ดูเรียบ ๆ */
  .history::-webkit-scrollbar{ display:none; }

  /* ลดขนาด/ระยะเพื่อช่วยให้พอดีคอลัมน์โดยไม่ต้องเลื่อนมาก */
  :root{
    --hist-dot: 11px;            /* ขนาดจุดเล็กลงบนจอแคบ */
    --hist-gap: 4px;             /* ระยะระหว่างจุด */
    --hist-bracket: 12px;        /* ขนาด [] */
    --hist-bracket-off: 6px;     /* offset ของ [] จากจุดล่าสุด */
  }
}

/* ป้องกันวงเล็บถูกบีบ/คลิปที่ขอบ: ตั้งจากคอนเทนเนอร์หลักด้วย padding แล้ว */
.history .badge.latest::before{ left: calc(-1 * var(--hist-bracket-off)); }
.history .badge.latest::after { right: calc(-1 * var(--hist-bracket-off)); }
/* --- Fix 10-dot bar on narrow/portrait screens --- */
@media (max-width: 768px){
  /* ให้พ่อของแถบ 10 จุด (ถ้าเป็น flex) ยอมขึ้นหลายบรรทัด */
  .top, .top-row, .status-row, .header-row, .board-row {
    flex-wrap: wrap !important;
    overflow: visible !important;
  }

  /* บังคับให้ .history (10 จุด) กินเต็มบรรทัดของตัวเองและอยู่กลางเสมอ */
  #history, .history {
    flex-basis: 100% !important;   /* กินเต็มแถว (ถ้า parent เป็น flex) */
    width: 100% !important;
    order: 2;                       /* จัดให้อยู่บรรทัดถัดจากกล่องสองฝั่ง */
    display: flex !important;
    justify-content: center !important;
    align-items: center !important;
    gap: var(--dot10-gap, 5px) !important;
    padding: 6px 8px !important;
    margin: 0 !important;
    overflow: visible !important;   /* ห้ามถูกคลิปขอบ */
    z-index: 5 !important;          /* ให้อยู่เหนือการ์ด/กล่อง */
  }

  /* ขนาด/ช่องไฟของจุดบนจอแคบ (กันล้นโดยไม่ต้องซ่อน) */
  #history .dot, .history .dot {
    width: 11px !important;
    height: 11px !important;
    flex: 0 0 auto !important;
  }

  /* วงเล็บ [] ของ 10 จุด: ให้คงตำแหน่งชิดและไม่หลุดขอบ */
  #history > span, .history > span {
    margin: 0 3px !important;
    font: 900 12px/1 ui-monospace, SFMono-Regular, Menlo, monospace !important;
    transform: none !important;
  }
}

/* --- ป้องกัน parent บางตัวที่ชอบบีบ/ยืดแถบ 10 จุด --- */
#history, .history {
  flex: 0 0 auto !important;        /* ห้ามถูกยืดกว้างโดย parent */
  max-width: 100% !important;       /* ไม่กว้างเกิน viewport/คอลัมน์ */
}

