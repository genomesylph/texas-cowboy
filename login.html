<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="utf-8">
  <title>‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö - Texas Cowboy</title>
  <style>
    body {
      display:grid; place-items:center; height:100vh;
      background:#222; color:#fff; font-family:sans-serif;
    }
    .login-box {
      background:#333; padding:20px; border-radius:10px;
      max-width:320px; width:100%;
    }
    h2 { margin-top:0; text-align:center; }
    label { display:block; margin:10px 0 4px; }
    input {
      width:100%; padding:10px; border-radius:6px; border:none; margin-bottom:12px;
    }
    button {
      width:100%; padding:10px; border-radius:6px; border:none;
      background:#4fa3ff; color:#fff; font-weight:bold; cursor:pointer;
    }
    button:hover { background:#3585d4; }
    #signupBtn { margin-top:8px; background:#58b368; }
  </style>
</head>
<body>
  <div class="login-box">
    <h2>‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</h2>
    <label>‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô</label>
    <input id="name" placeholder="‡πÄ‡∏ä‡πà‡∏ô Nueng">
    <label>PIN 4 ‡∏´‡∏•‡∏±‡∏Å</label>
    <input id="pin" type="password" maxlength="4" inputmode="numeric">
    <button id="loginBtn">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</button>
    <button id="signupBtn">‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡πÉ‡∏´‡∏°‡πà</button>
  </div>

  <script>
    const GH_OWNER  = "genomesylph";   // ‡πÉ‡∏™‡πà‡∏Ç‡∏≠‡∏á‡∏°‡∏∂‡∏á
    const GH_REPO   = "texas-cowboy";   // ‡πÉ‡∏™‡πà‡∏Ç‡∏≠‡∏á‡∏°‡∏∂‡∏á
    const GH_BRANCH = "main";        // ‡∏´‡∏£‡∏∑‡∏≠ "gh-pages"
    const GH_PATH   = "users.json";

    const RAW_URL = `https://raw.githubusercontent.com/${GH_OWNER}/${GH_REPO}/${GH_BRANCH}/${GH_PATH}`;

    async function loadUsers(){
      const res = await fetch(RAW_URL, { cache:"no-cache" });
      if(!res.ok) throw new Error("‡πÇ‡∏´‡∏•‡∏î users.json ‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ");
      return await res.json();
    }

    async function doLogin(){
      const name = document.getElementById("name").value.trim();
      const pin  = document.getElementById("pin").value.trim();
      if(!name || pin.length!==4) return alert("‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡πÅ‡∏•‡∏∞ PIN 4 ‡∏´‡∏•‡∏±‡∏Å");

      const users = await loadUsers();
      if(!users[name]) return alert("‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô‡∏ô‡∏µ‡πâ");
      if(users[name].pin!==pin) return alert("PIN ‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á");

      localStorage.setItem("cowboy_current", name);
      location.href = "index.html";
    }

    async function doSignup(){
      const name = document.getElementById("name").value.trim();
      const pin  = document.getElementById("pin").value.trim();
      if(!name || pin.length!==4) return alert("‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡πÅ‡∏•‡∏∞ PIN 4 ‡∏´‡∏•‡∏±‡∏Å");

      const users = await loadUsers();
      if(users[name]) return alert("‡∏°‡∏µ‡∏ä‡∏∑‡πà‡∏≠‡∏ô‡∏µ‡πâ‡πÅ‡∏•‡πâ‡∏ß");

      // üìù ‡∏ï‡∏£‡∏á‡∏ô‡∏µ‡πâ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡∏Å‡∏•‡∏±‡∏ö GitHub (‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ä‡πâ API+token)
      // ‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡πÉ‡∏´‡∏°‡πà‡∏à‡∏∞‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏à‡∏£‡∏¥‡∏á ‡∏ï‡πâ‡∏≠‡∏á‡∏ó‡∏≥ Step 4 ‡∏ï‡πà‡∏≠
      alert("‡πÇ‡∏´‡∏°‡∏î‡∏ó‡∏î‡∏™‡∏≠‡∏ö: ‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡πÉ‡∏´‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à (‡πÅ‡∏ï‡πà‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡∏Å‡∏•‡∏±‡∏ö GitHub)");
    }

    document.getElementById("loginBtn").onclick = doLogin;
    document.getElementById("signupBtn").onclick = doSignup;
  </script>
</body>
</html>
